<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Rings: Multiple Lua States</title>
    <link rel="stylesheet" href="http://www.keplerproject.org/doc.css" type="text/css"/>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"><a href="http://www.keplerproject.org">
		<img alt="Rings logo" src="rings.png"/>
	</a></div>
	<div id="product_name"><big><strong>Rings</strong></big></div>
	<div id="product_description">Multiple Lua States</div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">
<h1>Rings</h1>
	<ul>
		<li><a href="index.html">Home</a>
			<ul>
				<li><a href="index.html#overview">Overview</a></li>
				<li><a href="index.html#status">Status</a></li>
				<li><a href="index.html#download">Download</a></li>
				<li><a href="index.html#history">History</a></li>
				<li><a href="index.html#credits">Credits</a></li>
				<li><a href="index.html#contact">Contact us</a></li>
			</ul>
		</li>
		<li><strong>Manual</strong>
			<ul>
				<li><a href="manual.html#introduction">Introduction</a></li>
				<li><a href="manual.html#installation">Installation</a></li>
				<li><a href="manual.html#reference">Reference</a></li>
			</ul>
		</li>
		<li><a href="license.html">License</a></li>
	</ul>
</div> <!-- id="navigation" -->

<div id="content">

<h2><a name="introduction"></a>Introduction</h2>
<p>Rings is a simple library which allows Lua programs to create
new Lua States.
It also provides a very simple way to communicate between the Master State
and the Slaves.
<p>
Rings is free software and uses the same
<a href="license.html">license</a>
as Lua 5.0.
</p>

<p>Rings source consists in a single C source file.
The distribution provides a <code>Makefile</code> prepared to
compile the library and install it. The file <code>config</code> should
be edited to suit the needs of the aimed platform.</p>

<h2><a name="installation"></a>Installation</h2>

<p>Rings library follows the
<a href="http://www.keplerproject.org/compat">package model</a>
for Lua 5.1, therefore it should be "installed". Refer to
<a href="http://www.keplerproject.org/compat/manual.html#configuration">
Compat-5.1 configuration</a> section about how to install the source files
properly</p>

<p>Windows users can use the pre-compiled versions of Rings available at
<a href="http://luaforge.net/projects/rings/files">LuaForge</a></p>


<h2><a name="reference"></a>Reference</h2>

<p>
Rings offers a single function which creates a new Lua state and returns
an object representing it.
The state which creates other states is called the master and the created
ones, slaves.
The master can execute code in any of its slaves but the slave can only
do the same in the master (or in its own slaves).
</p>
The object representing the slave has a method (<code>dostring</code>)
which can execute Lua code in the corresponding state.
This method can receive arguments (only numbers, strings, booleans and userdata,
which are converted to lightuserdata).

<dl>
    <dt><strong>rings.new ()</strong></dt>
    <dd>Returns a newly created Lua state.</dd>

    <dt><strong><em>state</em>:close ()</strong></dt>
    <dd>Closes the state.</dd>

    <dt><strong><em>state</em>:dostring (string, ...)</strong></dt>
    <dd>Executes a string in the slave state.
        The arguments are stored into <code>arg</code> table into the
        slave state.
        Valid types of arguments and return values are:
        number, string, boolean, nil and userdata (which are converted
        to lightuserdata).
        Returns a boolean indicating the status of the operation and
        the returned values or an error message in case of error.
    </dd>
</dl>

<h2><a name="slave_functions"></a>Slave function</h2>

The following function is registered in the newly created slave state.

<dl>
    <dt><strong>remotedostring (string, ...)</strong></dt>
    <dd>Executes a string in the master state.
        The arguments are stored into <code>arg</code> table into the
        master state.
        Valid types of arguments and return values are:
        number, string, boolean, nil and userdata (which are converted
        to lightuserdata).
        Returns a boolean indicating the status of the operation and
        the returned values or an error message in case of error.
    </dd>
</dl>

<h2><a name="stable"></a>Stable</h2>

<p>
Stable is a simple API which provides to a slave state a way to store
and retrieve data to and from its master state.
</p>

<dl>
    <dt><strong>stable.get (key)</strong></dt>
    <dd>Returns the value of a given <em>key</em>.</dd>

    <dt><strong>stable.set (key, value)</strong></dt>
    <dd>Stores a <em>value</em> associated to a <em>key</em>.
        Returns nothing.</dd>

</dl>

</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
	<p><small>
	$Id: manual.html,v 1.3 2006/02/03 12:01:39 tomas Exp $
	</small></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->

</body>
</html> 
